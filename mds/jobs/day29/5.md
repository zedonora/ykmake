mkdir -p mds/jobs/day29
touch mds/jobs/day29/5.md

# 롤백 계획 확인

배포된 새로운 버전에 심각한 문제(치명적 오류, 성능 저하, 보안 이슈 등)가 발생했을 경우, 서비스를 이전의 안정적인 상태로 신속하게 되돌리기 위한 롤백(Rollback) 계획을 확인하고 숙지하는 과정입니다. Vercel과 같은 플랫폼은 롤백 기능을 비교적 간편하게 제공합니다.\n
## 1. Vercel 롤백 메커니즘 이해\n\n-   **불변 배포 (Immutable Deployments):** Vercel은 각 배포(Git push 또는 수동 배포 트리거 시)마다 고유하고 불변하는 배포 인스턴스를 생성합니다. 즉, 기존 배포를 직접 수정하는 것이 아니라 항상 새로운 배포를 만듭니다.\n-   **즉시 롤백 (Instant Rollback):** 이러한 불변 배포 덕분에, 문제가 발생하면 이전의 특정 배포 인스턴스를 현재 프로덕션 트래픽이 바라보도록 즉시 전환할 수 있습니다. 이 과정은 거의 다운타임(Downtime) 없이 이루어집니다.\n
## 2. Vercel 대시보드에서 이전 배포 확인\n\n-   **Vercel 프로젝트 대시보드 접속:** Vercel에 로그인하여 해당 프로젝트를 선택합니다.\n-   **Deployments 탭 이동:** 프로젝트 대시보드 상단 메뉴에서 `Deployments` 탭을 클릭합니다.\n-   **배포 이력 확인:** 현재까지 이루어진 모든 배포(프로덕션, 프리뷰 포함) 목록과 각 배포의 상태(Ready, Error 등), 배포 시점, 연결된 Git 커밋 정보 등을 확인할 수 있습니다.\n-   **롤백 대상 식별:** 만약 롤백이 필요하다면, 이 목록에서 현재 프로덕션 배포 직전의 안정적인 상태였던 배포(일반적으로 이전 프로덕션 배포)를 식별합니다.\n\n## 3. Vercel 롤백 절차 확인 (시뮬레이션 또는 문서 확인)\n\n-   **롤백 방법:**\n    1.  `Deployments` 탭 목록에서 롤백하고자 하는 **이전의 안정적인 배포** 항목을 찾습니다.\n    2.  해당 배포 항목 오른쪽 끝에 있는 점 세 개(`...`) 메뉴(또는 유사한 옵션 버튼)를 클릭합니다.\n    3.  `Promote to Production` (또는 유사한 이름의 옵션)을 선택합니다.\n    4.  확인 창이 나타나면 내용을 확인하고 승인합니다.\n-   **결과:** Vercel은 즉시 프로덕션 트래픽(사용자 정의 도메인 및 Vercel 제공 프로덕션 URL)을 방금 선택한 이전 배포 버전으로 라우팅합니다. 현재 문제가 있는 최신 배포는 더 이상 프로덕션 트래픽을 받지 않게 됩니다.\n-   **주의:** 이 작업은 실제 운영 환경에 영향을 미치므로, 실제 롤백은 문제가 발생했을 때 신중하게 수행해야 합니다. 이 단계에서는 절차를 **확인하고 숙지**하는 데 중점을 둡니다.\n\n## 4. 데이터베이스 롤백 고려사항 확인\n\n-   **코드 롤백과의 동기화:** Vercel의 롤백은 **애플리케이션 코드**만을 이전 상태로 되돌립니다. 만약 새로운 코드 배포와 함께 데이터베이스 스키마 마이그레이션(Day 28, Task 3)이 수행되었다면, 코드 롤백만으로는 문제가 해결되지 않거나 오히려 데이터 불일치 문제가 발생할 수 있습니다.\n-   **데이터베이스 롤백 전략:**\n    -   **Down 마이그레이션 부재:** Drizzle Kit은 기본적으로 Down 마이그레이션 스크립트를 생성하지 않습니다.\n    -   **백업 복원:** 가장 일반적이고 안전한 방법은 코드 롤백과 함께 **데이터베이스를 해당 시점의 백업으로 복원**하는 것입니다. (Day 28, Task 3에서 백업 중요성 강조됨)\n    -   **수동 롤백 SQL:** 문제가 된 마이그레이션 SQL을 되돌리는 SQL을 수동으로 작성하여 실행할 수 있지만, 매우 신중해야 합니다.\n    -   **호환 가능한 스키마 설계:** 이상적으로는 데이터베이스 스키마 변경이 이전 버전의 코드와도 호환되도록 설계하여(예: 새로운 컬럼 추가 시 `NOT NULL` 제약 조건 바로 걸지 않기 등), 코드 롤백 시 DB 롤백이 필수가 아니도록 고려할 수 있습니다 (어려울 수 있음).\n-   **결론:** 코드 롤백 시 데이터베이스 상태를 어떻게 처리할지에 대한 계획(백업 복원 절차 확인 등)이 반드시 마련되어 있어야 합니다.\n\n## 5. 롤백 후 검증 계획 확인\n\n-   만약 롤백을 수행했다면, 롤백된 이전 버전이 정상적으로 작동하는지 다시 한번 Smoke Test 수준의 검증을 수행해야 합니다.\n-   롤백된 버전에서 사용자들이 서비스를 정상적으로 이용할 수 있는지 확인합니다.\n\n## 완료 확인\n\n1.  Vercel의 불변 배포 및 즉시 롤백 메커니즘을 이해했습니다.\n2.  Vercel 대시보드의 `Deployments` 탭에서 이전 배포 목록을 확인하고, 특정 배포를 프로덕션으로 승격시키는 롤백 절차(`Promote to Production`)를 확인하고 숙지했습니다.\n3.  코드 롤백 시 데이터베이스 스키마 및 데이터의 상태를 어떻게 처리할지(예: DB 백업 복원 절차)에 대한 계획을 확인했습니다.\n4.  롤백 수행 후 필요한 검증 절차(Smoke Test 등)를 인지하고 있습니다.\n5.  운영 환경 문제 발생 시 신속하게 이전 버전으로 롤백할 수 있는 절차와 고려사항을 파악했습니다.\n``` 