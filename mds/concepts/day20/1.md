# Day 20 - 개념 1: IdeasGPT 페이지 상세 구현

IdeasGPT 기능은 사용자가 인공지능을 활용하여 아이디어를 생성하고, 이를 구매하거나 판매할 수 있는 기능입니다. 이 기능을 통해 창의적인 아이디어가 필요한 사용자와 아이디어를 판매하고자 하는 사용자 사이에 경제 생태계를 구축합니다.

## 1. UI 구성 및 레이아웃 설계

`mds/jobs/day20/1.md`에서는 IdeasGPT 페이지의 UI 구성 요소를 다음과 같이 설계했습니다:

1. **IdeasHeader**: 페이지 제목과 설명을 표시하는 컴포넌트
2. **IdeasGPTPrompt**: 사용자가 AI에게 아이디어 생성을 지시할 수 있는 입력 폼
3. **IdeasGallery**: 최근 생성된 아이디어를 목록 형태로 표시하는 컴포넌트

이러한 구성은 다음과 같은 설계 원칙을 반영합니다:

* **컴포넌트 분리**: 각 UI 요소를 독립적인 컴포넌트로 분리하여 재사용성과 유지보수성을 높임
* **반응형 레이아웃**: `grid` 레이아웃을 통해 화면 크기에 따라 컴포넌트 배치가 자동으로 조정됨 (모바일에서는 세로 배치, 데스크톱에서는 가로 배치)
* **Outlet 패턴**: Remix의 `<Outlet />` 컴포넌트를 사용하여 중첩 라우트 구현을 준비함 (예: 아이디어 상세 보기, 구매 모달 등)

## 2. Shadcn UI 컴포넌트 활용

프로젝트에서는 Shadcn UI를 사용하여 일관된 디자인 시스템을 구현합니다. IdeasGPT 페이지에서는 다음 컴포넌트들이 사용됩니다:

* **Card**: 주요 UI 섹션을 시각적으로 구분하고 내용을 담는 컨테이너로 사용
* **Button**: 사용자 액션을 위한 상호작용 요소로 사용
* **Textarea**: 사용자 입력을 받기 위한 멀티라인 텍스트 입력 필드
* **Tabs**: 간단 모드와 고급 모드 전환을 위한 탭 인터페이스
* **Skeleton**: 데이터 로딩 중 표시할 로딩 상태 UI

Shadcn UI의 장점은 다음과 같습니다:

* **접근성(a11y)**: 모든 컴포넌트가 웹 접근성 표준을 준수하도록 설계됨
* **테마 지원**: 'rose' 테마를 기본으로 하며, 필요시 쉽게 커스터마이징 가능
* **상태 관리**: 버튼의 로딩 상태나 비활성 상태 등 다양한 UI 상태를 쉽게 관리 가능

## 3. 상태 관리 및 사용자 경험

IdeasGPT 페이지에서의 상태 관리는 다음 항목을 고려하여 설계되었습니다:

* **입력 상태**: `useState`를 사용하여 사용자 입력(prompt)을 관리
* **로딩 상태**: 아이디어 생성 중임을 사용자에게 알리기 위한 `isLoading` 상태
* **사용자 피드백**: 
  * 버튼 비활성화를 통해 입력이 비어있거나 처리 중일 때 중복 제출 방지
  * 로딩 아이콘과 텍스트 변경을 통해 작업 진행 상태를 시각적으로 표시
  * 스켈레톤 UI를 통해 데이터 로딩 중임을 직관적으로 표시

## 4. 데이터 모델 설계

아이디어를 저장하기 위한 `ideas` 테이블은 다음과 같은 필드로 구성됩니다:

* `id`: 고유 식별자 (UUID)
* `title`: 아이디어 제목
* `description`: 간단한 아이디어 설명
* `details`: 아이디어에 대한 상세 내용 
* `creatorId`: 아이디어를 생성한 사용자의 ID (외래 키)
* `ownerId`: 아이디어를 소유한 사용자의 ID (외래 키)
* `isPublic`: 공개 여부
* `price`: 아이디어 구매 가격
* `createdAt` / `updatedAt`: 생성 및 수정 시간

이 데이터 모델은 다음과 같은 비즈니스 룰을 지원합니다:

* **생성-소유 분리**: 아이디어 생성자(`creatorId`)와 소유자(`ownerId`)를 분리하여 아이디어 거래 지원
* **가격 책정**: `price` 필드를 통해 아이디어의 판매 가격 설정 가능
* **공개 설정**: `isPublic` 필드를 통해 아이디어의 공개 여부 제어

## 5. 인덱스 최적화

데이터베이스 쿼리 성능 최적화를 위해 다음 두 개의 인덱스를 생성합니다:

* `creatorIdIdx`: 특정 사용자가 생성한 아이디어를 빠르게 검색하기 위한 인덱스
* `ownerIdIdx`: 특정 사용자가 소유한 아이디어를 빠르게 검색하기 위한 인덱스

이러한 인덱스는 다음과 같은 쿼리 패턴을 효율적으로 지원합니다:

* "내가 생성한 아이디어 목록" 조회
* "내가 구매한 아이디어 목록" 조회
* 사용자별 아이디어 관리 페이지

## 6. 외래 키 참조 및 제약 조건

데이터 무결성을 유지하기 위해 다음과 같은 외래 키 제약 조건을 설정했습니다:

* `creatorId`: `users.id`를 참조하며, 사용자가 삭제되면 해당 사용자가 생성한 아이디어도 함께 삭제됨 (`cascade`)
* `ownerId`: `users.id`를 참조하며, 사용자가 삭제되면 해당 사용자가 소유한 아이디어의 소유자 정보는 `null`로 설정됨 (`set null`)

이러한 제약 조건은 다음과 같은 상황을 적절히 처리합니다:

* 아이디어 생성자가 탈퇴할 경우: 해당 사용자가 생성한 모든 아이디어 삭제
* 아이디어 소유자가 탈퇴할 경우: 해당 아이디어의 소유권이 없어지지만 아이디어 자체는 보존됨

## 결론

IdeasGPT 페이지 구현은 Shadcn UI 컴포넌트를 활용한 사용자 친화적 인터페이스와 Drizzle ORM을 통한 강력한 데이터 모델링을 조합하여 완성됩니다. 이 구현은 사용자가 AI를 활용하여 아이디어를 생성하고, 생성된 아이디어를 거래할 수 있는 기반을 마련합니다. 이후 작업에서는 OpenAI API 연동을 통해 실제 AI 기반 아이디어 생성 기능을 추가하고, 아이디어 구매 및 클레임 기능을 구현하여 완전한 아이디어 마켓플레이스를 구축할 예정입니다. 