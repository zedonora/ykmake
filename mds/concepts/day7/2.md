# 작업 2 개념: 팀(Teams) 정보 스키마 정의 및 목록 표시

이 작업은 `jobs` 정보와 마찬가지로 애플리케이션에서 새로운 데이터 유형인 '팀(Team)' 정보를 관리하고 사용자에게 보여주는 과정을 다룹니다. 작업 1에서 다룬 구인구직(`jobs`) 정보 처리 흐름과 거의 동일한 패턴을 따릅니다.

## 핵심 개념 복습 및 적용 (Teams)

1.  **데이터베이스 스키마 정의 (`app/db/schema.ts`):**
    *   **새 테이블 정의 (`teams`):** Drizzle ORM을 사용하여 팀 정보를 저장할 `teams` 테이블의 구조를 정의합니다. 팀 이름(`name`), 설명(`description`), 로고 URL(`logoUrl`), 소유자 ID(`ownerId`) 등의 컬럼을 포함합니다.
    *   **관계 설정 (`ownerId`):** `ownerId` 컬럼은 팀의 소유자를 식별하기 위해 `profiles` 테이블의 `id`를 참조하는 외래 키로 설정합니다. 사용자가 삭제되었을 때 팀 정보를 유지할지(`onDelete: 'set null'`) 또는 함께 삭제할지(`onDelete: 'cascade'`) 정책을 결정합니다. `jobs/day7/2.md`에서는 `set null`을 사용했습니다.
    *   **타입 추론 (`Team`, `NewTeam`):** Drizzle의 타입 추론 기능을 활용하여 `Team` (조회 시) 및 `NewTeam` (삽입 시) 타입을 `export`하여 코드 전체에서 일관된 데이터 타입을 사용하도록 합니다.

2.  **데이터베이스 마이그레이션:**
    *   `schema.ts`에 `teams` 테이블이 추가되었으므로, `drizzle-kit generate` 및 `drizzle-kit migrate` 명령어를 실행하여 이 변경 사항을 실제 데이터베이스 스키마에 반영합니다.
    *   Supabase Studio에서 `teams` 테이블 생성 및 필요 시 RLS 정책 설정을 확인합니다.

3.  **Remix 라우트 및 `loader` 구현 (`app/routes/teams._index.tsx`):**
    *   **라우트 파일 생성:** 팀 목록을 표시할 `/teams` 경로에 해당하는 `teams._index.tsx` 파일을 생성합니다.
    *   **데이터 조회 및 조인 (`loader`):**
        *   Drizzle `db` 클라이언트를 사용하여 `teams` 테이블의 데이터를 조회합니다.
        *   `.leftJoin(profiles, eq(teams.ownerId, profiles.id))`를 사용하여 `teams` 테이블의 `ownerId`와 `profiles` 테이블의 `id`를 기준으로 조인합니다. 이를 통해 팀 정보와 함께 소유자의 정보(예: `username`, `avatarUrl`)를 한 번의 쿼리로 가져올 수 있습니다.
        *   `select` 절에서 필요한 정보(`team` 테이블 전체, `owner`의 특정 필드)를 명시적으로 선택합니다.
    *   **정렬 및 반환:** 조회된 데이터를 최신순 등으로 정렬하고 `Response.json()`으로 클라이언트에 반환합니다.

4.  **UI 컴포넌트 구현 (카드 레이아웃):**
    *   **데이터 사용 (`useLoaderData`):** `loader`로부터 `teamList` (팀 정보와 소유자 정보 포함) 데이터를 받아옵니다.
    *   **카드 레이아웃:** Shadcn UI의 `Card`, `Avatar` 등의 컴포넌트를 활용하여 각 팀 정보를 시각적으로 보기 좋은 카드 형태로 표시합니다. 팀 로고, 이름, 설명, 소유자 정보, 생성일 등을 포함합니다.
    *   **데이터 표시:** `map` 함수를 사용하여 `teamList`를 순회하며 각 팀 카드(`Card`)를 렌더링합니다. 소유자 정보(`owner`)는 `leftJoin` 결과이므로 없을 수도 있음에 유의하여 조건부로 렌더링합니다 (`owner && ...`).

## 패턴의 반복과 재사용

이 작업은 새로운 데이터 유형(Jobs, Teams)을 추가할 때마다 반복되는 일반적인 개발 패턴(스키마 정의 → 마이그레이션 → 데이터 로딩 → UI 표시)을 다시 한번 보여줍니다. 이 패턴에 익숙해지면 앞으로 유사한 기능을 더 빠르고 효율적으로 구현할 수 있습니다.

또한, 목록을 표시하는 UI 구현 시 카드 레이아웃과 같은 재사용 가능한 디자인 패턴을 적용하면 애플리케이션 전체의 시각적 일관성을 유지하는 데 도움이 됩니다. 