# 작업 3 개념: 동적 라우트와 URL 파라미터를 이용한 카테고리 페이지 (데이터 로딩 포함)

이 작업은 Remix의 동적 라우트 기능을 활용하여 다양한 카테고리에 대한 페이지를 하나의 파일로 처리하는 방법을 보여줍니다. 사용자가 특정 카테고리 URL(예: `/category/frontend`)로 접속하면, 해당 카테고리와 관련된 정보를 보여주는 페이지를 동적으로 생성합니다.

## 핵심 개념

1.  **동적 라우트 세그먼트:**
    *   Remix 라우트 파일 이름에 달러 기호(`$`) 접두사를 사용하면 해당 부분이 URL의 동적 세그먼트(파라미터)가 됩니다. (예: `app/routes/category.$categorySlug.tsx`)
    *   사용자가 `/category/react`로 접속하면 `$categorySlug`는 `"react"` 값을 가집니다. `/category/design-systems`로 접속하면 `$categorySlug`는 `"design-systems"`가 됩니다.
    *   이를 통해 수많은 카테고리 페이지를 각각 만들 필요 없이 하나의 파일로 관리할 수 있어 효율적입니다.

2.  **URL 파라미터 접근:**
    *   **`loader` 함수:** `loader` 함수는 첫 번째 인자인 `LoaderFunctionArgs` 객체를 통해 URL 파라미터에 접근할 수 있습니다. `params` 객체 (예: `params.categorySlug`)를 통해 동적 세그먼트의 값을 얻습니다.
    *   **UI 컴포넌트:** 페이지 컴포넌트 내에서는 Remix의 `useParams` 훅을 사용하여 현재 URL의 파라미터 값을 가져올 수 있습니다. 이는 `loader`를 거치지 않고 컴포넌트 레벨에서 파라미터 값이 필요할 때 유용합니다.

3.  **동적 데이터 로딩 (`loader` 구현):**
    *   `jobs/day7/3.md`의 `loader` 함수는 `params.categorySlug` 값을 사용하여 **실제 데이터베이스 조회**를 수행합니다.
    *   Drizzle `db` 클라이언트를 사용하여 `jobs` 테이블에서 `category` 컬럼 값이 `categorySlug`와 일치하는(`where(eq(jobs.category, categorySlug))`) 레코드들을 조회합니다.
    *   조회된 관련 데이터 목록(`categoryJobs`)을 `categorySlug`와 함께 `json` (또는 `Response.json`)으로 반환합니다.
    *   **확장성:** 향후 이 `loader`는 `jobs` 뿐만 아니라 `community_posts`, `ideas_gpt` 등 다른 테이블에서도 동일한 `categorySlug`로 데이터를 조회하여 여러 종류의 관련 정보를 함께 반환하도록 확장될 수 있습니다.

4.  **동적 메타 태그 (`meta` 함수):**
    *   페이지의 검색 엔진 최적화(SEO) 및 브라우저 탭 제목 표시를 위해 `meta` 함수를 사용합니다.
    *   `meta` 함수는 `loader`가 반환한 데이터(`data`)에 접근할 수 있습니다. 이를 활용하여 `data.categorySlug` 값을 이용해 각 카테고리 페이지에 맞는 동적인 제목(`title`)과 설명(`description`)을 설정합니다. (예: "React 카테고리 | YkMake")

5.  **URL 파라미터 유효성 검사 (Zod):**
    *   URL 파라미터는 사용자가 임의로 입력할 수 있으므로, `loader` 함수 초기에 Zod 스키마(`ParamsSchema`)를 사용하여 예상하는 형식(예: 문자열, 최소 길이)인지 검증하는 것이 안전합니다.
    *   유효하지 않은 파라미터가 들어오면 오류 응답(예: 400 Bad Request)을 반환하여 잘못된 요청을 처리합니다.

6.  **UI 구현 (데이터 렌더링):**
    *   페이지 컴포넌트에서는 `useLoaderData` 훅을 사용하여 `loader`가 반환한 `categorySlug`와 `categoryJobs` 데이터를 가져옵니다.
    *   가져온 `categoryName`을 페이지 제목 등으로 표시합니다.
    *   `categoryJobs` 배열을 `map` 함수로 순회하며 각 Job 정보를 목록 형태로 렌더링합니다.
    *   데이터가 없을 경우 "표시할 항목이 없습니다"와 같은 메시지를 보여줍니다.

이러한 동적 라우트 패턴은 카테고리뿐만 아니라 사용자 프로필 페이지(`/users/$userId`), 제품 상세 페이지(`/products/$productId`) 등 다양한 상황에서 재사용될 수 있는 중요한 개발 기법입니다. 