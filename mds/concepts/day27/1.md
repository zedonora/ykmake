mkdir -p mds/concepts/day27
touch mds/concepts/day27/1.md

# Day 27: 단위 테스트 및 통합 테스트 (Vitest)

## 개념

소프트웨어 테스팅은 애플리케이션의 품질을 보장하고 버그를 줄이며, 코드 변경 시 예기치 않은 문제가 발생하는 것을 방지(회귀 방지)하는 데 필수적인 과정입니다. 주요 테스트 유형 중 단위 테스트와 통합 테스트는 다음과 같습니다.

### 단위 테스트 (Unit Testing)

단위 테스트는 애플리케이션을 구성하는 가장 작은 단위(일반적으로 함수, 메서드, 또는 독립적인 모듈)가 예상대로 정확하게 작동하는지 검증하는 테스트입니다. 각 단위는 가능한 한 격리된 상태에서 테스트되며, 외부 의존성(데이터베이스, 네트워크 요청, 다른 모듈 등)은 모의(Mock) 객체나 스텁(Stub)으로 대체될 수 있습니다.

-   **목표:** 특정 코드 조각의 로직 정확성 검증.
-   **장점:** 빠르고, 문제 발생 시 원인 파악이 용이하며, 상세한 코드 커버리지를 제공합니다.
-   **예시:** 입력값을 받아 특정 계산을 수행하는 함수, 데이터를 특정 형식으로 변환하는 유틸리티 함수.

### 통합 테스트 (Integration Testing)

통합 테스트는 여러 개의 단위(모듈, 컴포넌트, 서비스)가 함께 연동될 때 예상대로 작동하는지 검증하는 테스트입니다. 단위 테스트보다 더 넓은 범위를 다루며, 개별 단위들이 상호작용하는 과정에서의 문제를 발견하는 데 중점을 둡니다.

-   **목표:** 여러 컴포넌트 또는 모듈 간의 상호작용 및 데이터 흐름 검증.
-   **장점:** 실제 사용 시나리오와 유사한 환경에서 테스트하여 시스템 수준의 문제를 발견할 수 있습니다.
-   **단점:** 단위 테스트보다 느리고, 실패 시 원인 파악이 더 복잡할 수 있습니다.
-   **예시:** React 컴포넌트가 상태 변경에 따라 올바르게 렌더링되고 사용자 이벤트에 반응하는지 테스트, API 요청을 보내고 응답을 받아 처리하는 모듈 테스트.

## Vitest: 현대적인 테스트 프레임워크

Vitest는 Vite 기반의 빠르고 현대적인 JavaScript/TypeScript 테스트 프레임워크입니다. Vite의 설정과 개발 서버를 공유하여 빠른 실행 속도와 우수한 개발 경험을 제공합니다.

-   **주요 특징:**
    -   **Vite 통합:** Vite 설정(`.vite.config.ts`)을 공유하고, Vite의 빠른 모듈 로딩(ESM 네이티브)을 활용합니다.
    -   **Jest 호환 API:** `describe`, `it`, `expect` 등 Jest와 유사한 API를 제공하여 기존 Jest 사용자도 쉽게 적응할 수 있습니다.
    -   **TypeScript/JSX 네이티브 지원:** 별도 설정 없이 TypeScript와 JSX를 바로 사용할 수 있습니다.
    -   **빠른 실행:** 스마트한 파일 워칭, HMR(Hot Module Replacement)을 통한 빠른 재실행.
    -   **다양한 기능:** 모의(Mocking), 스냅샷 테스팅, 테스트 커버리지 리포트, 인-소스 테스팅(in-source testing) 등 다양한 기능을 내장하거나 쉽게 통합할 수 있습니다.
    -   **DOM 시뮬레이션:** `jsdom` 또는 `happy-dom`을 사용하여 Node.js 환경에서도 브라우저 DOM 환경을 시뮬레이션할 수 있습니다.

## 테스팅 라이브러리 (Testing Library)

`@testing-library/react`와 같은 테스팅 라이브러리는 사용자의 관점에서 컴포넌트와 상호작용하는 방식으로 테스트를 작성하도록 권장합니다. 컴포넌트의 내부 구현 세부사항보다는 **실제 사용자가 보게 될 결과와 동작 방식**을 테스트하는 데 중점을 둡니다.

-   **핵심 원칙:** "테스트 코드가 소프트웨어 사용 방식과 더 유사할수록, 더 많은 확신을 줄 수 있다."
-   **주요 기능:**
    -   컴포넌트 렌더링 (`render`)
    -   DOM 요소 쿼리 (접근성 기반: `getByRole`, `getByLabelText` 등)
    -   사용자 이벤트 시뮬레이션 (`userEvent`)
    -   DOM 상태 단언 (`@testing-library/jest-dom` 매처 활용: `toBeInTheDocument`, `toBeDisabled` 등)

Vitest와 Testing Library를 함께 사용하면, React 컴포넌트(통합 테스트)를 사용자의 입장에서 효과적으로 테스트하고, 순수 함수 등은 격리하여 단위 테스트를 수행함으로써 애플리케이션의 안정성을 높일 수 있습니다.

## Type Fest (부가적 활용)

Type Fest는 테스트 프레임워크 자체는 아니지만, TypeScript 프로젝트에서 복잡한 타입을 다룰 때 유용한 유틸리티 타입들을 제공하는 라이브러리입니다. 테스트 대상 코드나 테스트 유틸리티 함수에서 타입 정의를 더 명확하고 안전하게 만드는 데 도움을 줄 수 있습니다. 예를 들어, 특정 속성만 필수로 만들거나(`RequireExactlyOne`), 여러 타입의 합집합/교집합을 다루는 등의 작업을 간편하게 해줍니다. 테스트 코드의 타입 안전성을 간접적으로 향상시키는 역할을 할 수 있습니다. 