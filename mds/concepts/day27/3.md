# Day 27: 오류 모니터링 (Sentry)

## 개념

### 오류 모니터링 (Error Monitoring)

오류 모니터링은 운영(Production) 환경에서 실행 중인 소프트웨어 애플리케이션에서 발생하는 예외(Exception) 및 오류(Error)를 실시간으로 감지, 기록, 분석하는 프로세스입니다. 사용자가 경험하는 문제를 개발팀이 인지하지 못하는 상황을 방지하고, 애플리케이션의 안정성과 신뢰성을 유지하는 데 필수적입니다.

효과적인 오류 모니터링 시스템은 다음과 같은 기능을 제공합니다.

-   **자동 오류 감지:** 코드에서 처리되지 않은 예외나 명시적으로 보고된 오류를 자동으로 수집합니다.
-   **컨텍스트 정보 수집:** 오류 발생 시점의 스택 트레이스, 사용자 정보(ID, IP 주소 등), 브라우저/OS 정보, 요청 데이터, 이전 사용자 행동(Breadcrumbs) 등 디버깅에 유용한 풍부한 컨텍스트 정보를 함께 기록합니다.
-   **오류 그룹화:** 동일한 원인으로 발생하는 오류들을 지능적으로 그룹화하여 중복 알림을 방지하고 문제의 심각도를 파악하기 쉽게 합니다.
-   **알림:** 새로운 오류가 발생하거나 특정 오류의 빈도가 급증할 때 이메일, 슬랙(Slack) 등 다양한 채널로 개발팀에 실시간 알림을 보냅니다.
-   **릴리스 추적:** 어떤 버전의 코드 배포 이후 특정 오류가 발생하기 시작했는지 추적하여 문제 해결을 돕습니다.
-   **대시보드 및 분석:** 오류 발생 추이, 영향받는 사용자 수, 브라우저/OS별 분포 등 다양한 통계 및 분석 정보를 시각적으로 제공합니다.

### Sentry: 대표적인 오류 모니터링 서비스

Sentry는 널리 사용되는 오픈소스 기반의 오류 모니터링 플랫폼입니다. 클라우드 호스팅 서비스 또는 자체 서버 설치(Self-hosted) 형태로 사용할 수 있으며, 다양한 프로그래밍 언어와 프레임워크(JavaScript, Python, Java, Ruby, PHP, Go, React, Remix, Node.js, Django 등)를 위한 공식 SDK를 제공합니다.

## 핵심 원리: Sentry 작동 방식

1.  **SDK 연동:** 개발자는 자신의 애플리케이션 코드에 해당 언어/프레임워크용 Sentry SDK를 설치하고 초기화합니다. 이때 Sentry 프로젝트의 고유 DSN(Data Source Name) 키를 설정합니다.
2.  **오류/이벤트 캡처:** 애플리케이션 실행 중 오류(처리되지 않은 예외, 명시적 `Sentry.captureException()` 호출 등)가 발생하면, Sentry SDK가 이를 감지하고 관련 컨텍스트 정보(스택 트레이스, 환경 정보, 사용자 정보 등)를 수집하여 **이벤트(Event)** 를 생성합니다.
3.  **Sentry 서버로 전송:** SDK는 생성된 이벤트를 설정된 DSN을 사용하여 인터넷을 통해 Sentry 서버로 비동기적으로 전송합니다. 이는 애플리케이션의 주 실행 흐름을 방해하지 않도록 설계되었습니다.
4.  **이벤트 처리 및 저장:** Sentry 서버는 수신된 이벤트를 처리합니다. 이 과정에는 소스맵(Source Map)을 이용한 스택 트레이스 변환, 유사한 오류 그룹화(Grouping), 관련 메타데이터 추가 등이 포함됩니다.
5.  **알림 및 대시보드 표시:** 처리된 오류 정보는 Sentry 데이터베이스에 저장되고, 설정된 규칙에 따라 개발팀에 알림이 발송됩니다. 개발자는 Sentry 웹 대시보드를 통해 수집된 오류 정보를 확인하고 분석할 수 있습니다.

## Sentry 연동의 이점

-   **사전 문제 감지:** 사용자가 직접 버그를 신고하기 전에 운영 환경의 오류를 미리 파악하고 대응할 수 있습니다.
-   **빠른 디버깅:** 오류 발생 시점의 상세한 컨텍스트 정보(스택 트레이스, 브레드크럼, 환경 정보 등)를 제공하여 원인 분석 및 해결 시간을 단축합니다.
-   **영향도 분석:** 어떤 오류가 얼마나 자주 발생하고, 몇 명의 사용자에게 영향을 미치는지 파악하여 수정 우선순위를 결정하는 데 도움을 줍니다.
-   **애플리케이션 안정성 향상:** 오류를 지속적으로 모니터링하고 해결함으로써 애플리케이션의 전반적인 안정성과 사용자 만족도를 높일 수 있습니다.
-   **성능 모니터링 (APM):** 오류 모니터링 외에도 트랜잭션 추적, 병목 구간 식별 등 성능 관련 인사이트를 제공하는 기능을 확장하여 사용할 수 있습니다.
-   **세션 리플레이:** 사용자의 실제 상호작용을 영상처럼 재생하여 오류 발생 과정을 시각적으로 재현하고 이해하는 데 도움을 줄 수 있습니다.

Sentry와 같은 오류 모니터링 도구는 현대 웹 개발 및 운영(DevOps) 환경에서 안정적인 서비스를 제공하기 위한 필수적인 요소로 자리 잡고 있습니다. 