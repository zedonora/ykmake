# 개념 4: Remix 라우팅 및 레이아웃 시스템

## Remix의 파일 기반 라우팅

Remix는 **파일 시스템 기반 라우팅** 컨벤션을 사용하여 웹 애플리케이션의 경로를 정의합니다. `app/routes/` 디렉토리 내의 파일 구조가 URL 경로와 직접 매핑됩니다.

*   **기본 라우트:** `app/routes/` 디렉토리 내의 `.tsx` 또는 `.jsx` 파일은 해당 파일 이름을 경로로 사용합니다.
    *   `app/routes/about.tsx` -> `/about`
    *   `app/routes/contact.tsx` -> `/contact`
*   **인덱스 라우트:** 디렉토리의 루트 페이지는 `_index.tsx` 파일을 사용하여 정의합니다.
    *   `app/routes/_index.tsx` -> `/`
    *   `app/routes/products/_index.tsx` -> `/products`
*   **동적 라우트:** 파일 이름에 `$` 접두사를 사용하여 동적 세그먼트를 정의합니다.
    *   `app/routes/users/$userId.tsx` -> `/users/123`, `/users/abc` (`userId` 파라미터 사용 가능)
*   **스플랫 라우트 (Catch-all):** `$` 파일 이름 뒤에 `*`를 사용하여 여러 세그먼트를 한 번에 처리할 수 있습니다. (예: `app/routes/files/$.tsx`)

## 루트 레이아웃 (`app/root.tsx`)

`app/root.tsx` 파일은 Remix 애플리케이션의 **가장 상위 레벨 레이아웃**을 정의하는 특별한 파일입니다. 이 파일은 모든 페이지 요청에 대해 렌더링되며, 전체 애플리케이션의 HTML 구조(`<html>`, `<head>`, `<body>`)를 포함합니다.

*   **전역 스타일 및 스크립트:** 전역 CSS 파일(`tailwind.css` 등)이나 필요한 메타 태그, 외부 스크립트 등을 `<head>`에 포함시킵니다. Remix는 `LinksFunction`을 export하여 CSS 파일을 로드하는 표준 방법을 제공합니다.
*   **공통 UI 요소:** 모든 페이지에 공통적으로 표시될 헤더(Header), 푸터(Footer), 네비게이션 바 등의 컴포넌트를 `<body>` 내부에 배치합니다.
*   **중첩 라우트 렌더링 (`<Outlet />`):** `<Outlet />` 컴포넌트는 현재 활성화된 **자식 라우트(child route)**의 컴포넌트가 렌더링될 위치를 지정합니다. 즉, `app/routes/` 내의 각 페이지 컴포넌트(예: `_index.tsx`, `login.tsx`)의 내용이 `<Outlet />` 자리에 표시됩니다.
*   **전역 상태 관리:** `ThemeProvider`와 같은 전역 상태 제공자(Context Provider)로 전체 애플리케이션을 감싸는 역할을 수행할 수 있습니다.

```tsx
// app/root.tsx 예시 구조
import { Links, Meta, Outlet, Scripts } from "@remix-run/react";
import type { LinksFunction } from "@remix-run/node";
import styles from "./tailwind.css?url";
import { Header } from "~/components/header";
import { Footer } from "~/components/footer";

export const links: LinksFunction = () => [
  { rel: "stylesheet", href: styles },
];

export default function App() {
  return (
    <html lang="ko">
      <head>
        <Meta />
        <Links />
      </head>
      <body>
        <Header /> {/* 공통 헤더 */}
        <main>
          <Outlet /> {/* 자식 라우트 컴포넌트가 여기에 렌더링됨 */}
        </main>
        <Footer /> {/* 공통 푸터 */}
        <Scripts />
      </body>
    </html>
  );
}
```

## 라우트 모듈 (Route Modules)

`app/routes/` 디렉토리 내의 각 파일은 **라우트 모듈**이라고 불립니다. 각 라우트 모듈은 일반적으로 React 컴포넌트를 `default export`하며, 해당 경로로 접속했을 때 이 컴포넌트가 `<Outlet />` 위치에 렌더링됩니다.

라우트 모듈은 페이지 컴포넌트 외에도 다음과 같은 Remix의 특수 함수들을 `export` 할 수 있습니다.

*   `meta`: 페이지의 메타 태그 (`<title>`, `<meta name="description">` 등)를 설정합니다.
*   `links`: 해당 라우트에만 필요한 CSS 파일을 로드합니다.
*   `loader`: 서버 사이드에서 데이터를 로드하여 컴포넌트에 전달합니다.
*   `action`: 폼 제출(POST, PUT, DELETE 등)을 처리합니다.

## Tailwind CSS와 테마 시스템

Remix 프로젝트의 테마 시스템은 CSS 변수와 Tailwind CSS를 함께 사용하여 구현합니다. 이 프로젝트에서는 Shadcn UI의 구성요소와 rose 테마를 사용합니다.

### 차트 색상 변수

데이터 시각화를 위한 차트를 구현할 때는 프로젝트에 정의된 `chart` 색상 변수를 활용합니다:

* `--chart-1` ~ `--chart-5`: 차트에 사용할 수 있는 5가지 색상으로, 라이트 모드와 다크 모드에 각각 다른 값을 가집니다.
* 이러한 색상 변수는, `tailwind.config.ts`에서 `theme.extend.colors.chart` 객체에 정의되어 있습니다.

예시 사용법:

```tsx
// app/routes/dashboard.tsx에서 차트 컴포넌트 예시
function DataChart() {
  return (
    <div className="flex gap-2 items-end h-60">
      <div className="w-12 bg-chart-1 h-[40%]" title="데이터 1"></div>
      <div className="w-12 bg-chart-2 h-[60%]" title="데이터 2"></div>
      <div className="w-12 bg-chart-3 h-[30%]" title="데이터 3"></div>
      <div className="w-12 bg-chart-4 h-[75%]" title="데이터 4"></div>
      <div className="w-12 bg-chart-5 h-[50%]" title="데이터 5"></div>
    </div>
  );
}
```

이러한 색상 변수를 사용하면 테마 변경(라이트/다크 모드)에 따라 일관되게 차트 색상이 바뀌어, 사용자 경험이 더 일관적이고 전문적으로 유지됩니다.

이러한 파일 기반 라우팅과 레이아웃 시스템 덕분에 Remix는 직관적이고 구조화된 방식으로 웹 애플리케이션 개발을 가능하게 합니다. 