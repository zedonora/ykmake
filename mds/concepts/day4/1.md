# 개념 1: 사용자 인증(Authentication) 구현 - 기본 설정 및 데이터베이스 테이블 준비

## Supabase Auth 기본

Supabase Auth는 사용자 회원가입, 로그인, 비밀번호 재설정, 소셜 로그인 등 다양한 인증 관련 기능을 쉽게 구현할 수 있도록 도와주는 서비스입니다. Supabase 프로젝트를 생성하면 기본적으로 Auth 기능이 활성화되어 있으며, 별도의 서버 설정 없이 클라이언트 및 서버 측 라이브러리를 통해 바로 사용할 수 있습니다.

주요 특징:

*   **내장된 사용자 관리:** Supabase는 `auth.users`라는 내장 테이블을 사용하여 사용자 정보를 관리합니다. 여기에는 사용자의 고유 ID(UUID), 이메일, 가입 시각 등의 기본 정보가 저장됩니다.
*   **다양한 인증 방식 지원:** 이메일/비밀번호, 매직 링크(비밀번호 없는 로그인), 소셜 로그인(Google, GitHub, Facebook 등), 휴대폰 번호 인증 등을 지원합니다.
*   **JWT 기반 세션 관리:** 사용자 로그인 시 JWT(JSON Web Token)를 발급하여 세션을 관리합니다. 이 토큰은 클라이언트(주로 쿠키 또는 로컬 스토리지)에 저장되며, 이후 API 요청 시 인증 헤더에 포함되어 사용자 신원을 확인하는 데 사용됩니다.
*   **RLS(Row Level Security) 통합:** 데이터베이스의 RLS 정책과 긴밀하게 통합되어, 로그인한 사용자의 ID(`auth.uid()`)를 기반으로 데이터 접근 권한을 제어할 수 있습니다.

## 데이터베이스 테이블 준비: `profiles` 테이블

Supabase의 `auth.users` 테이블은 기본적인 인증 정보만 저장하며, 보안상의 이유로 직접 수정하는 것이 권장되지 않습니다. 사용자의 추가 정보(예: 사용자 이름, 프로필 사진 URL, 자기소개 등)를 저장하려면 별도의 테이블을 생성해야 합니다. 관례적으로 이 테이블의 이름은 `profiles`로 지정합니다.

`profiles` 테이블 설계 시 고려사항:

*   **기본 키(Primary Key):** `auth.users` 테이블의 사용자 ID(UUID 타입)를 `profiles` 테이블의 기본 키이자 외래 키(Foreign Key)로 설정합니다. 이렇게 하면 `auth.users` 테이블의 각 사용자와 `profiles` 테이블의 각 프로필이 일대일(1:1) 관계를 맺게 됩니다.
*   **필요한 컬럼 추가:** 사용자 이름(`username`), 전체 이름(`full_name`), 아바타 URL(`avatar_url`), 웹사이트 주소(`website`) 등 애플리케이션에 필요한 추가 사용자 정보를 위한 컬럼을 정의합니다.
*   **기본값 및 제약 조건 설정:** 필요에 따라 컬럼의 기본값(Default Value)이나 제약 조건(Constraint, 예: `username`은 고유해야 함)을 설정합니다.
*   **RLS 정책 활성화:** `profiles` 테이블에 대한 RLS 정책을 활성화하여, 사용자가 자신의 프로필 정보만 조회하거나 수정할 수 있도록 보안을 강화해야 합니다.

## 인증 흐름 설정 (Supabase 대시보드)

애플리케이션 코드 작성 전에 Supabase 대시보드에서 기본적인 인증 설정을 확인하고 구성하는 것이 좋습니다.

*   **Authentication -> Providers:** 활성화할 인증 방식(예: Email, Google)을 선택하고 필요한 설정을 완료합니다.
*   **Authentication -> Settings:** 이메일 템플릿(가입 확인, 비밀번호 재설정 등), 리다이렉트 URL 등을 설정합니다.

다음 작업에서는 Supabase 대시보드에서 `profiles` 테이블을 실제로 생성하고, 필요한 RLS 정책을 설정하는 SQL 스크립트를 작성합니다. 