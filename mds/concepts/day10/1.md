# Day 10 - 개념 1: 비밀번호 없는 인증 (Passwordless Authentication) - OTP & Magic Link

`jobs/day10/1.md`에서는 Supabase에서 OTP(One-Time Password) 및 Magic Link 인증 방식을 설정하는 방법을 다뤘습니다. 이들은 **비밀번호 없는 인증(Passwordless Authentication)** 의 대표적인 예시입니다.

## 1. 비밀번호 없는 인증이란?

*   사용자가 서비스에 로그인하기 위해 미리 설정된 고정된 비밀번호를 입력할 필요가 없는 인증 방식입니다.
*   대신, 로그인 시점에 사용자만이 접근할 수 있는 채널(주로 이메일 또는 SMS)을 통해 일회성 코드(OTP)나 고유 링크(Magic Link)를 전송하고, 이를 통해 사용자를 인증합니다.

## 2. 비밀번호 없는 인증의 장점

*   **보안 강화**:
    *   **비밀번호 유출 위험 감소**: 사용자가 여러 서비스에 동일한 비밀번호를 재사용하는 경향이 있는데, 비밀번호 없는 방식은 이 문제를 원천적으로 해결합니다. 비밀번호 자체가 없으므로 유출될 비밀번호도 없습니다.
    *   **무차별 대입 공격(Brute-force attack) 및 사전 공격(Dictionary attack) 방어**: 고정된 비밀번호가 없으므로 공격자가 시도할 대상이 없습니다. OTP나 Magic Link는 일회성이거나 짧은 유효 기간을 가집니다.
    *   **피싱(Phishing) 위험 감소**: 사용자는 비밀번호를 입력할 필요가 없으므로, 가짜 로그인 페이지를 통해 비밀번호를 탈취하려는 피싱 공격에 덜 취약해집니다. (단, Magic Link 자체를 탈취하려는 피싱은 여전히 가능하므로 주의 필요)
*   **사용자 경험(UX) 향상**:
    *   **비밀번호 기억/관리 불필요**: 사용자는 복잡한 비밀번호를 만들고 기억하거나, 주기적으로 변경하고, 안전하게 관리해야 하는 부담에서 벗어날 수 있습니다.
    *   **간편한 로그인**: 이메일(또는 SMS) 확인만으로 로그인이 가능하여 과정이 단순해집니다. 특히 모바일 환경에서 비밀번호 입력보다 편리할 수 있습니다.
    *   **비밀번호 재설정 불필요**: 비밀번호 분실 및 재설정 과정의 번거로움이 사라집니다.

## 3. 주요 방식

*   **이메일 OTP (One-Time Password)**:
    *   **작동 방식**:
        1.  사용자가 로그인 페이지에 자신의 이메일 주소를 입력합니다.
        2.  시스템은 해당 이메일 주소로 일회용 숫자 코드(보통 6자리)를 발송합니다.
        3.  사용자는 이메일을 확인하고 받은 OTP 코드를 로그인 페이지에 입력합니다.
        4.  시스템은 입력된 코드가 유효한지(일치 여부, 만료 시간 등) 확인하고 인증을 완료합니다.
    *   **특징**: 간단하고 직관적이며, 많은 사용자가 익숙합니다. 2단계 인증(2FA)에서도 널리 사용됩니다.
*   **Magic Link**:
    *   **작동 방식**:
        1.  사용자가 로그인 페이지에 자신의 이메일 주소를 입력합니다.
        2.  시스템은 해당 이메일 주소로 **고유하고 일회성이며 시간 제한이 있는 링크**(Magic Link)를 발송합니다. 이 링크에는 사용자를 식별하고 인증 상태를 나타내는 토큰 정보가 포함되어 있습니다.
        3.  사용자는 이메일을 확인하고 받은 Magic Link를 클릭합니다.
        4.  링크를 클릭하면 브라우저는 해당 URL로 이동하고, 시스템(애플리케이션의 콜백 핸들러)은 URL에 포함된 토큰을 검증합니다.
        5.  토큰이 유효하면 시스템은 사용자를 인증하고 로그인 상태로 만듭니다 (세션 생성 등).
    *   **특징**: 사용자는 코드를 복사하여 붙여넣을 필요 없이 링크 클릭 한 번으로 로그인할 수 있어 매우 편리합니다.

## 4. Supabase 설정의 의미 (`jobs/day10/1.md`)

*   **Provider 활성화 (`Enable email OTP`, `Enable Magic Link`)**: Supabase Auth 서비스에게 해당 인증 방식을 사용할 것임을 알리고 관련 기능을 활성화합니다.
*   **이메일 템플릿**: 사용자에게 발송될 OTP 코드 또는 Magic Link 이메일의 내용을 정의합니다. 명확하고 사용자 친화적인 안내, 그리고 필수 토큰/링크(`{{ .Token }}`, `{{ .SiteURL }}`) 포함이 중요합니다.
*   **토큰 유효 기간**: 보안과 편의성 사이의 균형을 맞추는 설정입니다. 유효 기간이 너무 길면 토큰 탈취 시 위험이 커지고, 너무 짧으면 사용자가 시간 내에 입력/클릭하지 못할 수 있습니다.
*   **SMTP 설정**: 안정적인 이메일 전달은 비밀번호 없는 인증의 핵심입니다. Supabase 기본 발송 서비스 대신 신뢰할 수 있는 SMTP 서비스를 사용하는 것이 프로덕션 환경에서는 권장됩니다. 이메일이 스팸으로 분류되거나 지연/누락되면 사용자는 로그인할 수 없습니다.

## 5. 고려 사항

*   **이메일 접근성**: 사용자는 로그인 시점에 자신의 이메일 계정에 접근할 수 있어야 합니다.
*   **이메일 보안**: 사용자의 이메일 계정 자체가 탈취되면 비밀번호 없는 인증도 무력화될 수 있습니다. (이는 다른 인증 방식도 마찬가지입니다.)
*   **전달 지연/실패**: 이메일 시스템의 문제로 OTP/Magic Link 전달이 지연되거나 실패할 수 있습니다. 사용자에게 재시도 옵션이나 다른 로그인 방법을 안내하는 것이 좋습니다.
*   **유효 기간**: 사용자가 인지할 수 있도록 OTP/Magic Link의 유효 기간을 안내하는 것이 좋습니다.

비밀번호 없는 인증은 보안과 사용자 경험을 동시에 개선할 수 있는 효과적인 방법이며, 현대적인 웹 애플리케이션에서 점점 더 많이 채택되고 있습니다. Supabase는 이러한 방식을 쉽게 구현할 수 있도록 지원합니다. 